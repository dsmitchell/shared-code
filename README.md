# Shared
Sample code for a presentation on Strategies for multi-platform development with Xcode & Swift

Based on the `Resolve` project from The App Studio LLC

IMPORTANT: Set your Development Team so that you can build and deploy to your device

## Project organization

The project contains 3 targets, which is how various resources and .swift files are shared among the 3 platforms
* Shared-iOS
* Shared-macOS
* Shared-tvOS

Build Settings for the project are primarily placed at the project level (Select "Levels" instead of "Combined") so that the bundle identifier and code signing are shared, and only placed at the target level when necessary (entitlements and Info.plist)

Within the project Navigator, there are 4 top-level folders (2 are generated by Xcode)
* Frameworks - Xcode-generated folder for linked frameworks
* Platforms - contains 3 folders containing code & resources specific for each target: iOS, macOS, and tvOS
* Products - Xcode-generated folder for output targets
* Shared - contains folders for Common code and for code based on a framework: e.g. UIKit, Multipeer Connectivity, CoreLocation, etc

Within any of folders in Platforms and Shared, you may have the following folders
* Configuration - Anything related to an app's configuration: Info.plist, entitlements, bridging headers, AppDelegate, etc.
* Resources - Asset catalogs, movies, etc. that are not related to Storyboards (LaunchScreen.storyboard is ok because you can never use custom classes)
* Storyboards - contains .storyboard files and associated .swift files representing the custom classes within the storyboard

## Sharing code

When multiple targets are selected for any .swift file, code is shared. In this project:
* Extensions.swift: Contains "shims" (typealiases) to allow for common/normalized names for use in .swift files, as well as other platform-independent code
* VideoPlayerView.swift: Uses shims and a CALayer that is common to all three platforms to play a video
* VideoViewController.swift: Uses shims and the common VideoPlayerView, along with a button, to position and play the video
* AppDelegate-UIKit.swift: Common AppDelegate code for iOS, macCatalyst, and tvOS
* SceneDelegate-UIKit.swift: Common SceneDelegate code for iOS, macCatalyst, and tvOS
* Storyboards: each platform gets its own storyboard to handle configuration and layout of the video player view and button

## Specializing code

Other files should belong only to a single target:
* Via Extensions
	* VideoViewController-iOS.swift: iOS-specific customizations of VideoViewController contained within the associated Storyboards folder
	* VideoViewController-tvOS.swift: tvOS-specific customizations of VideoViewController contained within the associated Storyboards folder
* Via compiler directives
	* VideoPlayerView.swift: Uses #if os(tvOS), #if os(macOS), #if targetEnvironment(macCatalyst), etc. only where necessary
